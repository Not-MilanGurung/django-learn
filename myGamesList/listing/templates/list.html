{% extends 'master.html'%}
{% load static %}

{% block title%}
	List of my games
{% endblock %}

{% block head%}
	<script src="{% static 'listing/js/myList.js' %}"></script>
{% endblock %}


{% block content %}
	<h1>My games list</h1>
	<table>
		<tr>
			<th>Name</th>
			<th>Release Date</th>
			<th>Options</th>
		</tr>
		{% for game in gameList %}
		<tr>
			<td><a href="{{game.name}}">{{game.name}}</a></td>
			<td>{{game.release_date}}</td>
			<td>
				<div class="button-group">
					<form id="delete_form_{{game.name}}" method="delete" style="display:inline;">
						{% csrf_token %}
						<input type="hidden" name="action" value="delete">
						<input type="hidden" name="game_name" value="{{game.name}}">
					</form>
					<button class="btn delete-cancel-btn" onclick="deleteGame('{{game.name}}')" id="delete_{{game.name}}">Delete</button>
				</div>
			</td>
		</tr>
		{% empty %}
        <tr>
            <td colspan="3">No games available.</td>
        </tr>
		{% endfor %}
	</table>
	<div class="form-card">
		<h1>Add a New Game</h1>

		{% if error %}
		<p class="error">{{ error }}</p>
		{% endif %}

		<form method="POST">
			{% csrf_token %}

			<label for="name">Game Name:</label>
			<input type="text" name="name" id="name" required>

			<label for="genre">Genre:</label>
			<select name="genre" id="genre" required>
				<option value="">-- Select Genre --</option>
				{% for genre in genreList %}
				<option value="{{ genre.name }}">{{ genre.name }}</option>
				{% endfor %}
			</select>

			<label for="no_of_replays">Number of Replays:</label>
			<input type="number" name="no_of_replays" id="no_of_replays" min="0" required>

			<label for="rating">Rating (1â€“10):</label>
			<input type="number" name="rating" id="rating" min="1" max="10" step="0.1" required>

			<button type="submit">Add Game</button>
		</form>
	</div>
{% endblock %}